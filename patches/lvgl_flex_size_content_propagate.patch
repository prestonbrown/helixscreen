diff --git a/src/layouts/flex/lv_flex.c b/src/layouts/flex/lv_flex.c
index 5a7b1e804..e463cb37a 100644
--- a/src/layouts/flex/lv_flex.c
+++ b/src/layouts/flex/lv_flex.c
@@ -221,6 +221,22 @@ static void flex_update(lv_obj_t * cont, void * user_data)
 
     if(w_set == LV_SIZE_CONTENT || h_set == LV_SIZE_CONTENT) {
         lv_obj_refr_size(cont);
+
+#if LV_FLEX_PROPAGATE_SIZE_CONTENT
+        /*Propagate SIZE_CONTENT refresh up to ancestors.
+         *When a flex container has SIZE_CONTENT and positions its children,
+         *any ancestor that also has SIZE_CONTENT needs its size recalculated
+         *since child coordinates have now changed.*/
+        lv_obj_t * parent = lv_obj_get_parent(cont);
+        while(parent != NULL) {
+            int32_t pw = lv_obj_get_style_width(parent, LV_PART_MAIN);
+            int32_t ph = lv_obj_get_style_height(parent, LV_PART_MAIN);
+            if(pw == LV_SIZE_CONTENT || ph == LV_SIZE_CONTENT) {
+                lv_obj_refr_size(parent);
+            }
+            parent = lv_obj_get_parent(parent);
+        }
+#endif
     }
 
     lv_obj_send_event(cont, LV_EVENT_LAYOUT_CHANGED, NULL);
